\ProvidesPackage{AcademicBook}

\usepackage{etoc}

\usepackage{siunitx}

% for sub figures
\usepackage{caption}
\usepackage{subcaption}

\usepackage{booktabs}
\usepackage{threeparttable}
\usepackage{multirow}
\usepackage{makecell}

\usepackage{upgreek}
\usepackage{tikz}

%% Coding
% Setting for listings
\usepackage{accsupp}
\newcommand{\emptyaccsupp}[1]{\BeginAccSupp{ActualText={}}#1\EndAccSupp{}}
\usepackage{listings}% http://ctan.org/pkg/listings
\lstset
{
    language=C,
    numbers=left,
    numbersep=1em,
    numberstyle=\tiny\emptyaccsupp,
    basicstyle = \footnotesize,
    frame=single,
    framesep=\fboxsep,
    framerule=\fboxrule,
    rulecolor=\color{red},
    xleftmargin=\dimexpr\fboxsep+\fboxrule\relax,
    xrightmargin=\dimexpr\fboxsep+\fboxrule\relax,
    breaklines=true,
    basicstyle=\small\tt,
    keywordstyle=\color{blue},
    commentstyle=\color[rgb]{0.13,0.54,0.13},
    backgroundcolor=\color{yellow!10},
    tabsize=2,
    columns=flexible,
    morekeywords={maketitle},
    escapeinside={\%LISTING:}{\^^M},
}


%% General
\usepackage{hyperref}
\hypersetup{
    colorlinks      =   true,
    bookmarks       =   true,
    bookmarksopen   =   true,
    % bookmarksdepth  =   2,
    pdfstartview    =   Fit,
    pdftitle        =   {Academic Book},
    pdfauthor       =   {Jiaxin Zhong},
    citecolor = red,
}

\usepackage{outlines}


% setting for levels
\usepackage{titlesec}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\hypersetup{
    bookmarksopenlevel = 3
}
\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titleformat{\subparagraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\subparagraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

% Include the part number for cross-references
\makeatletter
\renewcommand{\p@chapter}{\thepart.} % prefix "\thepart." to the number of the chapter
\makeatother

% Enable Chinese
\usepackage[UTF8]{ctex}

\usepackage{lipsum}

%% Layout
% set the geometric info for the document
\usepackage{geometry}
\geometry{
    paper = a4paper, % Change to letterpaper for US letter
    inner = 2.54cm, % Inner margin
    outer = 2.54cm, % Outer margin
    bindingoffset = 0cm, % Binding offset
    top = 2.54cm, % Top margin
    bottom = 2.54cm, % Bottom margin
}


%% Math
% symbols
\usepackage{physics}
% ============use the color box============
\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\newtcolorbox{bluebox}{
    colback = blue!5,
    colframe=blue!35!black}
\newtcolorbox{greenbox}{
    colback = green!5,
    colframe=green!35!black}
\newtcolorbox{redbox}{
    colback = red!5,
    colframe=red!35!black}
\newtcbtheorem[number within=section]{formulabox}{Formula}% 
    {colback=green!5,colframe=green!35!black,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{definitionbox}{Definition}%
    {colback=blue!5,colframe=blue!35!black,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{issuebox}{Issue}%
    {colback=yellow!5,colframe=yellow!50!black,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{theorembox}{Theorem}%
    {colback=red!5,colframe=red!50,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{examplebox}{Example}%
    {colback=green!5,colframe=green!50!black,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{propertybox}{Property}%
    {colback=green!10,colframe=green!30!black,fonttitle=\bfseries}{th}
\newtcbtheorem[number within=section]{lawbox}{Law}%
    {colback=blue!20,colframe=green!35!black,fonttitle=\bfseries}{th}

\tcbset{FORMULA1/.style={colback=yellow!10!white,colframe=red!50!black,
    every box/.style={highlight math style={colback=LightBlue!50!white,colframe=Navy}} }}
% end of============use the color box============

% equation environments
\usepackage{environ}
\NewEnviron{eqred}
{
    \begin{equation}
    \tikz[baseline]{
        \node[fill = red!20, anchor = base]{
            $\displaystyle
            \BODY
    $
    }}
    \end{equation}
}
\NewEnviron{eqgreen}
{
    \begin{equation}
    \tikz[baseline]{
        \node[fill = green!20, anchor = base]{
            $\displaystyle
            \BODY
    $
    }}
    \end{equation}
}
\NewEnviron{eqyellow}
{
    \begin{equation}
    \tikz[baseline]{
        \node[fill = yellow!20, anchor = base]{
            $\displaystyle
            \BODY
    $
    }}
    \end{equation}
}
\NewEnviron{eqcyan}
{
    \begin{equation}
    \tikz[baseline]{
        \node[fill = cyan!20, anchor = base]{
            $\displaystyle
            \BODY
    $
    }}
    \end{equation}
}